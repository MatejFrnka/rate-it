<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments.html :: head(title=${user.username})}">
</head>

<body>
<div class="container-fluid">
    <header class="header">
        <div th:replace="~{fragments.html :: hamburger-menu}"></div>
        <div th:replace="~{fragments.html :: logo}"></div>
        <div th:replace="~{fragments.html :: login-menu}"></div>
        <script th:replace="~{fragments.html :: topbar-script}"></script>
    </header>
    <main class="content">
        <section class="user-info" th:object="${user}">
            <div class="user-image">
                <img src="/icons/user.svg" alt="placeholderImg">
            </div>
            <div class="user-details">
                <h2 th:text="*{username}"></h2>
                <p th:text="*{bio}"></p>
            </div>
        </section>
        <div class="user-follow">
            <a th:text="${user.followers} + ' Followers'"></a>
            <button class="button">Follow</button>
            <a th:text="${user.follows} + ' Following'"></a>
        </div>

        <h2 th:text="${user.username} + '\'s Interests'"></h2>
        <section class="user-interests">
            <div class="user-interest" th:each="interest : ${ratedInterests}" th:object="${interest}">
                <div class="user-interest-image">
                    <img th:if="*{imageName == null || imageName.isEmpty()}"
                         src="https://picsum.photos/400/300" alt="Random image"/>
                    <img th:unless="*{imageName == null || imageName.isEmpty()}"
                         th:src="@{|/api/v1/images/*{imageName}}"
                         alt="Interest image"/>
                </div>

                <div class="user-interest-content">
                    <header class="user-interest-header">
                        <div class="user-interest-title">
                            <h4 th:text="*{name}"></h4>
                            <p th:text="${user.username} + ' has rated ' + ${interest.ratedPlaces.size()} + ' '
                            + (${interest.ratedPlaces.size()} == 1 ? 'place' : 'places')"></p>
                        </div>
                        <!--                        <div class="user-interest-dropdown">-->
                        <!--                            <button disabled></button>-->
                        <!--                        </div>-->
                    </header>
                    <section class="user-interest-places">
                        <ul class="user-interest-place" th:each="place : ${interest.ratedPlaces}">
                            <li th:object="${place}">
                                <i class="fas fa-star yellow"></i>
                                <span th:text="*{avgRating}"></span>
                                <span th:text="*{name}"></span>
                            </li>
                        </ul>
                        <a class="button">Details</a>
                    </section>
                </div>
            </div>
        </section>
    </main>
    <footer th:replace="~{fragments.html :: footer}"></footer>
</div>
</body>
</html>